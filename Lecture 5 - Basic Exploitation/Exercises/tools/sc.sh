#!/usr/bin/env bash


if [ "$1" != "" ]; then
	in=$1
	if [ "$2" != "" ]; then
		out=$2
	else
		out=$in'.bin'
	fi

	obj=$in'.o'
	elf=$in'.elf'
	as $in -o $obj
	ld -N $obj -o $elf
	objcopy -O binary $elf $out
	rm -f $obj $elf
    
else
	echo "This script converts an assembly file to raw binary shellcode"
    echo "Usage: sc.sh asm_filename [output_filename]"
    echo "	asm_filename - The assembler input"
    echo "	out_filename - Name of the binary file to create" 
    echo "		If unspecified, '.bin' will be added to the input filename"
fi
